(this["webpackJsonpawesome-mapper"]=this["webpackJsonpawesome-mapper"]||[]).push([[0],{20:function(e,t,n){e.exports=n(44)},25:function(e,t,n){},26:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},27:function(e,t,n){},36:function(e,t,n){var a={"./special/bucket.png":37,"./special/empty.png":38,"./special/eraser.png":39,"./special/grid.png":40,"./special/transparent.png":41};function r(e){var t=c(e);return n(t)}function c(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=c,e.exports=r,r.id=36},37:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAA7EAAAOxAGVKw4bAAADVElEQVRYhbXXXYhVVRQH8N/chpqihyEkIiIKomSIiBALCtllYJCISWA9CNoXmPXSB+JDsECCHioLMipJYlKstDEKwoLi0AeJUehDZSEGPVhEyBBiJpehh7Nvnrmee+eemXHBZZ+91977/79r7/WxhwwgETGKh7AMV+EEDuDliPhxkD16ydAA4HdgFy6tUZ/Gpoh4cbYEzpsBfBE+xWgeOoh9+A1X43wsSyn9UxTF17Mh0NMCETGMQxjDKayJiD0V/UJ8hGvQxu0R8VVTAq0+uhUZHDZWwTOBw8o7MYlhbI2Ifvs1JrA6t3/gtboJEXEUz+TuDVjZlMBwH92Nuf08Ik5nwCV4FiPYHBEf4g1swuVYj4kmBPpZ4OLc/pzBV+AT3IZF2BsRazO58Tw3RcSCJgR6ekFK6S/8i+dSSkvxHi6oTBnC8pTSLvyKR/If+q4oih8GJdDTAhExHhH34xa8q3S5bhnGTfgef+exmwcF70sgk7hXGYTqwDsyGhFTOJz71zYh0PMSZvCdM4BThmU4ltvL8volyvsykV12cAINwCmjI5zM7Uhuv8Dd+Cki9mML9mRr/S9nHUFErGoA/molGb2NKYxFxAMRARvxvDP36JuIGKtuMI1ABp/pzKvSCUIiYh/25z23ZReFp9FJVovxbXbp6QQiYmVDcM7Eiu5+C29WSDyJl7LuIuzOWbZMRhGxHO83BKfMjGuULviUMkpWZQrrskvDVjyadcdw3VBE3IW9zlyeptLOv17r21gdERM5We3EfVn3eAvb5gBO6Un91g/jBcge8HpFd08Lx+cAPqicqHwvrXwvbGH3OQZvK91RRFyJJyq6kRZece6s0FZWUh/n/halF3Sk1YqISaWvzrd0POAdiIjFWNU9qRMHtuODeQZ/MCJ2VMbW101sZXawDr/MI/hbXeN31s2tRsJJZfL4c47gD3eDR8SIsmTrTSBPPKKsdGdzKTvg23vopmrGa7PhQaWvNrFEx+x14HLdeKBG1a6tiDKJWw12J3qdebdsdrYVTvYsSouiOJ5S2oHr9S6zBgVXFMWRlFLb9Ej4Wd+3YVEUp3LV+7vSIhdW1G2sjYjx2sX1+32ZUjqEK3AUG2Z8HXckIi7BY8oX0wJs6H6uzUb+A8LWJA06nE0EAAAAAElFTkSuQmCC"},38:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAXElEQVRYhe3W0QnAIAyE4VPcphu4v05g50k3OB+kteCf1yPwQUhIGq2FTF21ulh37zaf9WebflAAAABIEWHvwOqez/oZAQAA2wHl7T3nHwAA4PcA/gEAAA4HSHoAXBMf9o6ofKQAAAAASUVORK5CYII="},39:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAEl0lEQVR4nNWbW4geNRiGn9YDIrLUUqWIKEiFRaSIeCyCKXUvhIqgKChYvNN78cSivtVa9UbwwgsFUVCqSL3wuJa6GBDxQFEQkUVqXZdlLSoKIhWsbr2YGRjW/MlMJpkZ38t8X/Llff8k8+dLso6RQtJW4DZgG7AZWAWOAAeBVyT9kiLOuhSNpISk04AXgNs9bseAp4A9kla7xBuVAJKmgDcB07DK68Adkv6KjTkaASRtAOaAq1pWfQu4JVaEUQggaSNwALgssol3gJtjRBhcAEmbKBa2Szo2FTUSBhWgJD8PbE3UZOuRMJgAks6mIH9x4qZbibA+cfBGkLSZPOQBdgJvlJ/TIHoXIDP5CjuBV5s4npSxE/9BjfxFPYSbNsZ8Yq39zufU2wgoyX9IP+Qr3BNy6GURrJGf7iNeDavA+ZKWJzlkHwEDkoeC300hh2wYmHyFG3zGbAKMhDzAFp8xiwAjIh9EcgEkncP/hDwkFqAkP8+4yHsTJskECJBfShUnNZIIECD/IPBaijiR+Ntn7CxAiLykJwkMwyHRSYCG5IdGnhFQfuoO4iY/u4a8txOZkX4RDOzqZiXtjWk3E9IKUMvktCE/5BqQbgpEkh8a3tRYYwFq2VtXJuehAPl/msbJgO4ClIcWB3Bnbx+VtCfQxJBT4A+fMSiApNOBt4FLHea9kh6J7Fhf+NpnbDICngGucZQ/LWk2qkv9YRV40efgFUDSFuBOh+kl4N7YXvWI5yUt+BxCI+BW4OQ1ZZ8Dd7U8lh5iDVgA7g85hQS40FH2WJfj6J6wBFwv6feQY0iADY6yQ1Fd6g/LwA5Ji02cQwK4jpeOte0RsBhRJwbLwHZJh5tWCAmwdv5DxMZG0j6KvEBOrFD88o3JQ1gAlz1qZ1fuDnOJUJH/tm3FGAGikUmEirz3czcJMQQ77e0Ti9CJPAx3PyCFCJ3Jw0ACQGcRjpKAPMQJ4PoyRCFShGTkYcARUKGlCBX5b1LFjxEgx3FaExFWKP7kJCMPIxGgxD5g0gXoJAueC4NPAQBJ51LkGjc5zNnIwwhGQO18wXWOn5U8hMlk3cfXssyuw5Xs5GFAAWrXZF0p9mpXl5U8hAVwJT5SHKhuZHKKvdrPt97YxCBExrX3n+oSsJZid90O75U8hAX4yVH2eGwwFS9CJr0L6J08hAX4zFG2S9LutoFK8nPAFQ5zNed7JQ9hAfbjHgUPS7qvaRBJZ1AcrmxzmJdomcZKCe9laWvtcWPMr8CNDvOMMeZPa+3HvjZq5K91mCvy3gvNORG8LW6t/dIYMwVc7TDPGGOOW2s/ctUtyb+Lm/wiYCR936K/ydHourwx5gPgLOByh3mHMeZUY4y11p6oCss/Oe/jHvZHKMj/ENHnpGh8W1zSeuBZ4O4JLu8Bz1GsGdPAbuA8h99hitV+FFfnWl2XbyBCCAsU5Fci6ydHqxcj1toTxpg54EzgypaxvgKuk/Rjy3pZEf1gQtITwAMN3Q9RnNUlefCcEtFvhqy188aYn4HtwCke1/0Uz9h+i42VE52fzJSr/S5gBriAIml6FPgUeFnSF11j5MS/NXiavvEZUikAAAAASUVORK5CYII="},40:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAARUlEQVRYhe3XIRIAMAwCQej0/19OpxFV1cEcJnGsxZJK4SQBtd9Xsw7bfddo6ycAAAAAAAAAAAAAAAAAAOAmOk6z81zSAfMHCTfIbbnvAAAAAElFTkSuQmCC"},41:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAG0lEQVRYhe3BAQEAAAjDoNm/tEEOBAAAAGyrexAhAAJC6HS9AAAAAElFTkSuQmCC"},42:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=42},44:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(11),l=n.n(c),o=(n(25),n(26),n(27),n(3)),i=n(1),u=n(2),s=Object(u.a)({},{CREATE_MAP:"CREATE_MAP",CHANGE_DRAGGED_ELEMENT:"CHANGE_DRAGGED_ELEMENT",PLACE_TILE:"PLACE_TILE",SELECT_LAYER:"SELECT_LAYER",SET_BRUSH_SIZE:"SET_BRUSH_SIZE",ADD_LAYER:"ADD_LAYER",TOGGLE_GRID:"TOGGLE_GRID",LOAD_MAP:"LOAD_MAP",TOGGLE_ERASE_MODE:"TOGGLE_ERASE_MODE",TOGGLE_CLEAR_MODE:"TOGGLE_CLEAR_MODE",UPDATE_MAP_IMAGES:"UPDATE_MAP_IMAGES",FINISH_LOAD:"FINISH_LOAD",START_LOAD:"START_LOAD",SET_UNDO_STACK:"SET_UNDO_STACK",DELETE_LAYER:"DELETE_LAYER",CHANGE_LAYER_NAMES:"CHANGE_LAYER_NAMES"}),A=function(e){var t=Object(i.b)(),n=Object(i.c)((function(e){return e.xMapSize})),c=Object(i.c)((function(e){return e.yMapSize})),l=Object(i.c)((function(e){return e.mapBase})),u=Object(a.useState)(n),A=Object(o.a)(u,2),E=A[0],m=A[1],d=Object(a.useState)(c),b=Object(o.a)(d,2),p=b[0],f=b[1],g=Object(a.useState)(l),O=Object(o.a)(g,2),h=O[0],y=O[1];return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t({type:s.CREATE_MAP,xSize:E,ySize:p,mapBase:h})}},r.a.createElement("label",null,"X n\xba of tiles: "),r.a.createElement("input",{value:E,onChange:function(e){return m(e.target.value)},type:"number",name:"xTiles",min:"1"}),r.a.createElement("br",null),r.a.createElement("label",null,"Y n\xba of tiles: "),r.a.createElement("input",{value:p,onChange:function(e){return f(e.target.value)},type:"number",name:"yTiles",min:"1"}),r.a.createElement("br",null),r.a.createElement("label",null,"Pixels per Tile "),r.a.createElement("input",{value:h,onChange:function(e){return y(e.target.value)},type:"number",name:"formMapBase",min:"1"}),r.a.createElement("br",null),r.a.createElement("button",{type:"submit"},"Generate new Map!")))},E=n(4),m=function(e){var t=Object(i.b)(),n=Object(i.c)((function(e){return e.brushSize})),c=Object(i.c)((function(e){return e.xMapSize})),l=Object(i.c)((function(e){return e.yMapSize})),u=Object(i.c)((function(e){return e.draggedElement})),A=Object(i.c)((function(e){return e.eraseMode})),m=Object(i.c)((function(e){return e.selectedLayer})),d=Object(i.c)((function(e){return e.mapImages})),b=Object(i.c)((function(e){return e.undoStack})),p=Object(i.c)((function(e){return e.isLoadingMap})),f=(Object(i.c)((function(e){return e.deletedLayers})),Object(i.c)((function(e){return e.mapBase}))),g=Object(i.c)((function(e){return e.clearMode})),O=Object(a.useState)(!1),h=Object(o.a)(O,2),y=h[0],v=h[1],S=Object(a.useState)(null),j=Object(o.a)(S,2),L=j[0],C=j[1],M=Object(a.useState)(null),N=Object(o.a)(M,2),w=N[0],k=N[1],R=Object(a.useRef)(null),G=function(){var e=Object(E.a)(b);e.pop();var n=e[e.length-1];console.log(n);var a=R.current,r=a.getContext("2d");r.clearRect(0,0,a.width,a.height);var c=new Image;c.src=n,c.onload=function(){r.drawImage(c,0,0)},t({type:s.SET_UNDO_STACK,undoStack:e})},T=function(){v(!1),C(null),k(null),function(){var n=R.current,a=Object(E.a)(d),r=n.toDataURL();a[e.layer]=r,t({type:s.UPDATE_MAP_IMAGES,mapImages:a});var c=Object(E.a)(b);c.push(r),t({type:s.SET_UNDO_STACK,undoStack:c})}()},D=function(e){var t=e/f;return Math.floor(t)*f},I=function(e){var t=R.current,a=t.getContext("2d"),r=t.getBoundingClientRect(),c=D(e.clientX-r.left),l=D(e.clientY-r.top);if(c!=L||l!=w){var o=new Image;o.src=u,o.onload=function(){if(0===n){var e=a.createPattern(o,"repeat");a.fillStyle=e,a.fillRect(0,0,t.width,t.height)}else for(var r=0;r<n;r++)for(var i=0;i<n;i++)a.clearRect(c+r*f,l+i*f,f,f),a.drawImage(o,c+r*f,l+i*f)},C(c),k(l)}},B=function(e){var t=R.current,a=t.getContext("2d"),r=t.getBoundingClientRect(),c=D(e.clientX-r.left),l=D(e.clientY-r.top);if(c!=L||l!=w){for(var o=0;o<n;o++)for(var i=0;i<n;i++)a.clearRect(c+o*f,l+i*f,f,f);C(c),k(l)}};return p&&R.current&&(console.log("cagando"),function(){var t=R.current.getContext("2d"),n=new Image;n.src=d[e.layer],n.onload=function(){t.drawImage(n,0,0)}}(),t({type:s.FINISH_LOAD})),r.a.createElement("canvas",{className:"map-canvas",onKeyDown:function(e){return function(e){e.ctrlKey&&90===e.keyCode&&G()}(e)},onMouseDown:function(e){return function(e){if(g){if(window.confirm("Are you sure you want to delete the contents of the layer?")){var t=R.current;t.getContext("2d").clearRect(0,0,t.width,t.height)}}else v(!0),A?B(e):I(e)}(e)},onMouseUp:function(){T()},onMouseLeave:function(){y&&T()},onMouseMove:function(e){return function(e){y&&(A?B(e):I(e))}(e)},ref:R,tabIndex:"1000",id:"myCanvas-"+e.layer,width:c*f,height:l*f,style:m<e.layer?{display:"none"}:{}})},d=function(e){var t=Object(i.c)((function(e){return e.xMapSize})),n=Object(i.c)((function(e){return e.yMapSize})),c=e.mapBase,l=Object(a.useRef)(null);return Object(a.useEffect)((function(){var e=l.current.getContext("2d"),t=e.canvas.width,n=e.canvas.height;console.log(t),console.log(n),console.log(c),e.clearRect(0,0,t,n);console.log(0);for(var a=0;a<=t;a+=c)e.moveTo(a+0,0),e.lineTo(a+0,n+0);for(a=0;a<=n;a+=c)e.moveTo(0,a+0),e.lineTo(t+0,a+0);e.strokeStyle="black",e.stroke(),e.beginPath()}),[]),r.a.createElement("canvas",{className:"map-canvas grid",ref:l,tabIndex:"1000",id:"gridCanvas",width:t*c,height:n*c})},b=function(e){var t=Object(i.c)((function(e){return e.mapLayers})),n=Object(i.c)((function(e){return e.showGrid})),a=Object(i.c)((function(e){return e.mapBase})),c=Object(i.c)((function(e){return e.cleaisLoadingMaprMode})),l=Object(i.c)((function(e){return e.brushSize})),o=Object(i.c)((function(e){return e.eraseMode})),u=Object(i.c)((function(e){return e.deletedLayers})),s="map-canvas-container";return s=o?s.concat(" eraser-pointer"):0===l?s.concat(" bucket-pointer"):s.concat(" brush-pointer"),r.a.createElement("div",{className:s},r.a.createElement(m,{layer:0,isLoadingMap:c}),Array.from(Array(t),(function(e,t){if(!u.includes(t))return r.a.createElement(m,{layer:t+1,isLoadingMap:c})})),n?r.a.createElement(d,{mapBase:a}):r.a.createElement("div",null))},p=n(8),f=n.n(p),g=n(14),O=n(6),h=(n(34),n(5)),y=function(e){var t=Object(i.b)(),n=Object(a.useState)(""),c=Object(o.a)(n,2),l=(c[0],c[1],Object(a.useState)("")),u=Object(o.a)(l,2),A=u[0],m=u[1],d=Object(a.useState)(""),b=Object(o.a)(d,2),p=b[0],y=b[1],v=Object(a.useState)([]),S=Object(o.a)(v,2),j=S[0],L=S[1],C=Object(a.useRef)(null);Object(a.useEffect)((function(){C.current&&C.current.focus()}));var M=function(e){m(e.folderName),y(e.folderName)},N=function(e){e.folderName=p,m("")};function w(){return(w=Object(g.a)(f.a.mark((function e(t,n){var a,r,c,l,o,i,u;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=t.target.files,console.table(j),r=j[n].tiles,c=Object(E.a)(r),l=0;l<a.length;l++)o=t.target.files[l],i=URL.createObjectURL(o),c.push(i);(u=Object(E.a)(j))[n].tiles=c,L(u),t.target.value=null;case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement("div",{className:"tiles-selector"},r.a.createElement("h2",null,"Tile Selector"),r.a.createElement(O.d,null,r.a.createElement(O.b,null,j.map((function(e){return A!=e.folderName?r.a.createElement(O.a,{onDoubleClick:function(){M(e)}},e.folderName,"\xa0\xa0",r.a.createElement("a",{onClick:function(){M(e)}},r.a.createElement(h.b,null))):r.a.createElement(O.a,{tabIndex:"200"},r.a.createElement("input",{ref:C,onBlur:function(){N(e)},type:"text",value:p,onChange:function(e){y(e.target.value)},onKeyDown:function(t){return function(e,t){"Enter"===e.key&&N(t),27===e.keyCode&&N(t)}(t,e)}}),"\xa0\xa0",r.a.createElement("a",{onClick:function(){N(e)}},r.a.createElement(h.a,null)))})),r.a.createElement(O.a,{onClick:function(e){return function(e){var t={folderName:"Custom collection "+Number(j.length+1),tiles:[]};L([].concat(Object(E.a)(j),[t]))}()}},r.a.createElement(h.c,null))),j.map((function(e,n){return r.a.createElement(O.c,{className:"tiles-panel"},r.a.createElement("div",{className:"tiles-gallery"},e.tiles.map((function(e){return r.a.createElement("div",{className:"drag-tile",onClick:function(n){return function(e,n){e.preventDefault(),t({type:s.CHANGE_DRAGGED_ELEMENT,draggedElement:n})}(n,e)}},r.a.createElement("img",{src:e}))}))),r.a.createElement("label",{class:"upload-tiles"},r.a.createElement("input",{id:"loadTiles",type:"file",name:"file",onChange:function(e){return function(e,t){return w.apply(this,arguments)}(e,n)},accept:".png",multiple:!0}),r.a.createElement("span",null,"Add Tiles")))}))))},v=function(e){var t=Object(i.b)();return r.a.createElement("button",{onClick:function(e){t({type:s.ADD_LAYER})},className:"btn btn-dark"},"+")},S=function(e){var t=Object(i.b)(),n=Object(i.c)((function(e){return e.selectedLayer})),c=Object(i.c)((function(e){return e.mapLayers})),l=Object(i.c)((function(e){return e.deletedLayers})),u=Object(i.c)((function(e){return e.layerNames})),A=Object(a.useState)(),m=Object(o.a)(A,2),d=m[0],b=m[1],p=Object(a.useState)(""),f=Object(o.a)(p,2),g=f[0],O=f[1],y=Object(a.useRef)(null);Object(a.useEffect)((function(){y.current&&y.current.focus()}));var S=function(e,n){t({type:s.SELECT_LAYER,selectedLayer:n})},j=function(e){var n=Object(E.a)(u);n[e]=g,t({type:s.CHANGE_LAYER_NAMES,layerNames:n}),O(""),b()},L=function(e){b(e),O(u[e])};return r.a.createElement("div",null,r.a.createElement("button",{onClick:function(e){return S(0,0)},className:0===n?"btn btn-outline-dark active":"btn btn-outline-dark"},"Base Layer"),Array.from(Array(c),(function(e,a){if(!l.includes(a))return r.a.createElement("button",{onClick:function(e){return S(0,a+1)},onDoubleClick:function(){L(a)},className:n===a+1?"btn btn-outline-dark active":"btn btn-outline-dark"},d===a?r.a.createElement("span",{className:"layer-selector",tabIndex:"200"},r.a.createElement("span",{className:"layer-name"},r.a.createElement("input",{ref:y,onBlur:function(){j(a)},type:"text",value:g,onChange:function(e){O(e.target.value)},onKeyDown:function(e){return function(e,t){"Enter"===e.key&&j(t),27===e.keyCode&&j(t)}(e,a)}})),r.a.createElement("div",{className:"layer-actions"},r.a.createElement("span",{onClick:function(e){return j(e,a)},className:"close"},r.a.createElement(h.a,{className:" save-layer"})))):r.a.createElement("span",{className:"layer-selector"},r.a.createElement("span",{className:"layer-name"},u[a]),r.a.createElement("div",{className:"layer-actions"},r.a.createElement("span",{onClick:function(){return L(a)},className:"close"},r.a.createElement(h.b,{className:" edit-layer"})),r.a.createElement("span",{onClick:function(e){return n=a,void(window.confirm("Do you want to delete the Layer called "+u[n]+"? This action cannot be undone")&&t({type:s.DELETE_LAYER,deletedLayer:n}));var n},className:"close"},r.a.createElement(h.d,{className:" delete-layer"})))))})),r.a.createElement(v,null))},j=function(e){var t=Object(i.c)((function(e){return e.draggedElement}));return""===t&&(t="/images/special/empty.png"),r.a.createElement("div",null,"Selected Tile \xa0",r.a.createElement("img",{style:{border:"2px solid black"},src:t}))},L=n(10),C=function(e){var t=Object(i.b)(),n=Object(i.c)((function(e){return e.brushSize})),a=Object(i.c)((function(e){return e.eraseMode})),c=Object(i.c)((function(e){return e.clearMode})),l=function(e,n){t({type:s.SET_BRUSH_SIZE,brushSize:n})};return r.a.createElement("div",null,r.a.createElement("p",null,"Brush Size"),r.a.createElement("div",{className:"brush-selector"}," ",r.a.createElement("button",{onClick:function(e){return l(0,1)},className:1===n?"btn btn-outline-light active":"btn btn-outline-light "},r.a.createElement("img",{src:"/images/special/grid.png",width:"10px",height:"10px"})),r.a.createElement("button",{onClick:function(e){return l(0,2)},className:2===n?"btn btn-outline-light  active":"btn btn-outline-light "},r.a.createElement("img",{src:"/images/special/grid.png",width:"20px",height:"20px"})),r.a.createElement("button",{onClick:function(e){return l(0,4)},className:4===n?"btn btn-outline-light  active":"btn btn-outline-light"},r.a.createElement("img",{src:"/images/special/grid.png",width:"30px",height:"30px"}))),r.a.createElement("div",{className:"aditional-brushes"},r.a.createElement("button",{onClick:function(e){return l(0,0)},className:0===n?"btn btn-outline-light btn-link active":"btn btn-outline-light"},r.a.createElement("img",{src:"/images/special/bucket.png"})),r.a.createElement("button",Object(L.a)({onClick:function(e){return l(0,0)},className:a?"btn btn-outline-light btn-link active":"btn btn-outline-light"},"onClick",(function(){t({type:s.TOGGLE_ERASE_MODE,eraseMode:!a})})),r.a.createElement("img",{src:"/images/special/eraser.png",width:"32px",height:"32px"}))),r.a.createElement("div",{className:"aditional-brushes"},r.a.createElement("button",Object(L.a)({onClick:function(e){return l(0,0)},className:c?"btn btn-outline-dark active":"btn btn-outline-dark"},"onClick",(function(){t({type:s.TOGGLE_CLEAR_MODE})})),"Clear Layer")))},M=(n(35),function(e){var t=Object(i.c)((function(e){return e.mapImages})),n=Object(i.c)((function(e){return e.xMapSize})),a=Object(i.c)((function(e){return e.yMapSize})),c=Object(i.c)((function(e){return e.showGrid})),l=Object(i.c)((function(e){return e.mapBase}));return r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-light",onClick:function(){var e=document.createElement("CANVAS");e.width=n*l,e.height=a*l;var r=e.getContext("2d");!function(e,t){for(var n=new Array(e.length),a=0,r=e.length,c=0;c<e.length;c++)n[c]=new Image,n[c].onload=function(){++a>=r&&t(n)},n[c].src=e[c]}(t,(function(e){for(var n=0;n<t.length;n++)r.drawImage(e[n],0,0)})),setTimeout((function(){if(c){var t=r.canvas.width,n=r.canvas.height;console.log(t),console.log(n),console.log(l);console.log(0);for(var a=0;a<=t;a+=l)r.moveTo(a+0,0),r.lineTo(a+0,n+0);for(a=0;a<=n;a+=l)r.moveTo(0,a+0),r.lineTo(t+0,a+0);r.strokeStyle="black",r.stroke()}var o=e.toDataURL();console.log(o),window.open().document.write('<img src="'+o+'" />')}),200)}},"Print Map!"))}),N=function(e){var t=Object(i.b)(),n=Object(i.c)((function(e){return e.showGrid}));return r.a.createElement("div",{className:"toggle-grid"},r.a.createElement("label",null,r.a.createElement("span",null,"Show Grid"),r.a.createElement("input",{name:"showGrid",type:"checkbox",checked:n,onChange:function(){t({type:s.TOGGLE_GRID})}})))},w=function(e){var t=Object(i.b)(),n=Object(i.c)((function(e){return e}));n.mapImages,n.mapLayers,n.mapBase,n.xMapSize,n.yMapSize,n.deletedLayers,n.layerNames;function a(){return(a=Object(g.a)(f.a.mark((function e(n){var a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.target.files[0],n.target.value=null,r=[],e.prev=3,e.t0=JSON,e.next=7,a.text();case 7:e.t1=e.sent,r=e.t0.parse.call(e.t0,e.t1),t({type:s.CREATE_MAP,xSize:16,YSize:10,mapBase:32}),t({type:s.START_LOAD,loadFile:r}),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(3),alert("The file did not have the correct format");case 16:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}return r.a.createElement("div",{className:"save-load-map-buttons"},r.a.createElement("button",{onClick:function(){return function(){var e=new Blob([JSON.stringify(n)],{type:"text/plain;charset=utf-8"}),t=document.createElement("a");t.href=URL.createObjectURL(e),t.download="map.tilp",document.body.appendChild(t),t.click()}()},className:"btn btn-light"},"Save Map"),r.a.createElement("label",{class:"upload-map"},r.a.createElement("input",{id:"loadMap",type:"file",name:"file",onChange:function(e){return function(e){return a.apply(this,arguments)}(e)},accept:".tilp"}),r.a.createElement("span",null,"Load Map")))},k=[];k=n(36).keys(),console.log(n(42)),console.log(k);var R=function(){var e=Object(i.b)();return r.a.createElement("div",{tabIndex:"2000",onKeyDown:function(t){return function(t){t.altKey&&(49===t.keyCode&&e({type:s.SET_BRUSH_SIZE,brushSize:1}),50===t.keyCode&&e({type:s.SET_BRUSH_SIZE,brushSize:2}),51===t.keyCode&&e({type:s.SET_BRUSH_SIZE,brushSize:4}),t.ctrlKey&&e({type:s.SET_BRUSH_SIZE,brushSize:0})),"Shift"===t.key&&e({type:s.TOGGLE_ERASE_MODE,eraseMode:!0})}(t)},onKeyUp:function(t){return function(t){"Shift"===t.key&&e({type:s.TOGGLE_ERASE_MODE,eraseMode:!1})}(t)}},r.a.createElement("header",null),r.a.createElement("body",{className:"App-body"},r.a.createElement("div",{className:"App-controls"},r.a.createElement("div",{className:"App-left-controls"},r.a.createElement(C,null),r.a.createElement(N,null)),r.a.createElement("div",{className:"App-map"},r.a.createElement(S,null),r.a.createElement(b,null),r.a.createElement(j,null),r.a.createElement(y,null)),r.a.createElement("div",{className:"App-right-controls"},r.a.createElement(w,null),r.a.createElement(M,null),r.a.createElement(A,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var G=n(13),T={draggedElement:"",mapLayers:0,selectedLayer:0,brushSize:1,xMapSize:10,yMapSize:10,showGrid:!1,eraseMode:!1,mapBase:32,clearMode:!1,mapImages:[[]],isLoadingMap:!1,layersLoaded:-1,undoStack:[],deletedLayers:[],layerNames:[]};n(43);var D=Object(G.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s.CREATE_MAP:var n=t.xSize,a=t.ySize,r=t.mapBase,c=0;return Object(u.a)(Object(u.a)({},e),{},{mapLayers:c,xMapSize:n,yMapSize:a,selectedLayer:0,mapBase:Number(r),showGrid:!1,mapImages:[],isLoadingMap:!1,undoStack:[],deletedLayers:[],layerNames:[]});case s.CHANGE_DRAGGED_ELEMENT:return Object(u.a)(Object(u.a)({},e),{},{draggedElement:t.draggedElement});case s.SELECT_LAYER:var l=t.selectedLayer,o=e.deletedLayers;return o.includes(l-1)&&(l=e.selectedLayer),Object(u.a)(Object(u.a)({},e),{},{selectedLayer:l,undoStack:[]});case s.DELETE_LAYER:var i=t.deletedLayer,A=Object(E.a)(e.deletedLayers);return(l=e.selectedLayer)===i+1&&(l-=1),A.push(i),Object(u.a)(Object(u.a)({},e),{},{selectedLayer:l,deletedLayers:A});case s.SET_BRUSH_SIZE:return Object(u.a)(Object(u.a)({},e),{},{brushSize:t.brushSize});case s.ADD_LAYER:var m=e.mapLayers+1,d=Object(E.a)(e.mapImages);d.push("");var b=Object(E.a)(e.layerNames);return b.push("New Layer"),Object(u.a)(Object(u.a)({},e),{},{mapLayers:m,mapImages:d,layerNames:b});case s.CHANGE_LAYER_NAMES:return Object(u.a)(Object(u.a)({},e),{},{layerNames:t.layerNames});case s.TOGGLE_GRID:return Object(u.a)(Object(u.a)({},e),{},{showGrid:!e.showGrid});case s.TOGGLE_ERASE_MODE:return Object(u.a)(Object(u.a)({},e),{},{eraseMode:t.eraseMode});case s.TOGGLE_CLEAR_MODE:return Object(u.a)(Object(u.a)({},e),{},{clearMode:!e.clearMode});case s.UPDATE_MAP_IMAGES:return Object(u.a)(Object(u.a)({},e),{},{mapImages:t.mapImages});case s.START_LOAD:var p=t.loadFile;return Object(u.a)(Object(u.a)({},e),{},{mapImages:p.mapImages,mapLayers:p.mapLayers,selectedLayer:0,isLoadingMap:!0,mapBase:p.mapBase,xMapSize:p.xMapSize,yMapSize:p.yMapSize,deletedLayers:p.deletedLayers,layerNames:p.layerNames});case s.FINISH_LOAD:var f=e.layersLoaded;return++f>e.mapLayers?Object(u.a)(Object(u.a)({},e),{},{isLoadingMap:!1,layersLoaded:-1}):Object(u.a)(Object(u.a)({},e),{},{layersLoaded:f});case s.SET_UNDO_STACK:return Object(u.a)(Object(u.a)({},e),{},{undoStack:t.undoStack});default:return e}}));l.a.render(r.a.createElement(i.a,{store:D},r.a.createElement(r.a.StrictMode,null,r.a.createElement(R,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[20,1,2]]]);
//# sourceMappingURL=main.94269e8b.chunk.js.map